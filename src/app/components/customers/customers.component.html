<div class="container">
  <h2>Customer Management</h2>
  <form [formGroup]="customerForm" (ngSubmit)="onSubmit()">
    <!-- Full Name -->
    <div class="form-group">
      <label>Full Name</label>
      <input formControlName="fullName" class="form-control" placeholder="Enter full name">
      <div *ngIf="customerForm.get('fullName')?.invalid && (customerForm.get('fullName')?.dirty || customerForm.get('fullName')?.touched)" class="text-danger">
        Full Name is required.
      </div>
    </div>
    
    <!-- Email -->
    <div class="form-group">
      <label>Email</label>
      <input formControlName="email" class="form-control" placeholder="Enter email">
      <div *ngIf="customerForm.get('email')?.invalid && (customerForm.get('email')?.dirty || customerForm.get('email')?.touched)" class="text-danger">
        Please enter a valid email.
      </div>
    </div>
    
    <!-- Phone -->
    <div class="form-group">
      <label>Phone</label>
      <input formControlName="phone" class="form-control" placeholder="Enter phone number">
      <div *ngIf="customerForm.get('phone')?.invalid && (customerForm.get('phone')?.dirty || customerForm.get('phone')?.touched)" class="text-danger">
        Please enter a valid phone number (10-15 digits).
      </div>
    </div>
    
    <!-- Date of Registration -->
    <div class="form-group">
      <label>Date of Registration</label>
      <input formControlName="dateOfRegistration" type="date" class="form-control">
      <div *ngIf="customerForm.get('dateOfRegistration')?.invalid && (customerForm.get('dateOfRegistration')?.dirty || customerForm.get('dateOfRegistration')?.touched)" class="text-danger">
        Registration date is required.
      </div>
    </div>
    
    <!-- Customer Type -->
    <div class="form-group">
      <label>Customer Type</label>
      <select formControlName="customerType" class="form-control">
        <option value="" disabled>Select Type</option>
        <option value="regular">Regular</option>
        <option value="premium">Premium</option>
      </select>
      <div *ngIf="customerForm.get('customerType')?.invalid && (customerForm.get('customerType')?.dirty || customerForm.get('customerType')?.touched)" class="text-danger">
        Customer type is required.
      </div>
    </div>
    
    <!-- Profile Image -->
    <div class="form-group">
      <label>Profile Image</label>
      <input type="file" (change)="onFileChange($event)" class="form-control">
    </div>
    
    <button type="submit" class="btn btn-primary mt-3" [disabled]="customerForm.invalid">
      {{ isEditing ? 'Update Customer' : 'Add Customer' }}
    </button>
  </form>

  <hr>

  <table class="table table-striped mt-3" *ngIf="customers.length">
    <thead>
      <tr>
        <th>Profile Image</th>
        <th>Full Name</th>
        <th>Email</th>
        <th>Phone</th>
        <th>Date Registered</th>
        <th>Type</th>
        <th>Actions</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let customer of customers; index as i">
        <td>
          <img *ngIf="customer.profileImage" [src]="customer.profileImage" alt="Profile Image" width="50">
        </td>
        <td>{{ customer.fullName }}</td>
        <td>{{ customer.email }}</td>
        <td>{{ customer.phone }}</td>
        <td>{{ customer.dateOfRegistration | date }}</td>
        <td>{{ customer.customerType }}</td>
        <td>
          <button (click)="onEdit(i)" class="btn btn-warning btn-sm">Update</button>
          <button (click)="onDelete(i)" class="btn btn-danger btn-sm">Delete</button>
        </td>
      </tr>
    </tbody>
  </table>
</div>
