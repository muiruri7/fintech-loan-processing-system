<div class="container">
  <h2>Loan Payment Management</h2>
  <form [formGroup]="paymentForm" (ngSubmit)="onSubmit()">
    <div class="form-group">
      <label>Select Loan</label>
      <select formControlName="loanId" class="form-control">
        <option value="" disabled>Select Loan</option>
        <option *ngFor="let loan of loans" [value]="loan.id">
          Loan ID: {{ loan.id }} - {{ getCustomerByLoan(loan.id)?.fullName || 'Unknown Customer' }}
        </option>
      </select>
      <div *ngIf="paymentForm.get('loanId')?.invalid && (paymentForm.get('loanId')?.touched || paymentForm.get('loanId')?.dirty)" class="text-danger">
        Loan selection is required.
      </div>
    </div>

    <div class="form-group">
      <label>Installment Number</label>
      <input formControlName="installmentNumber" type="number" class="form-control">
      <div *ngIf="paymentForm.get('installmentNumber')?.invalid && (paymentForm.get('installmentNumber')?.touched || paymentForm.get('installmentNumber')?.dirty)" class="text-danger">
        Installment number is required.
      </div>
    </div>

    <div class="form-group">
      <label>Amount Paid</label>
      <input formControlName="amountPaid" type="number" class="form-control">
      <div *ngIf="paymentForm.get('amountPaid')?.invalid && (paymentForm.get('amountPaid')?.touched || paymentForm.get('amountPaid')?.dirty)" class="text-danger">
        Amount paid is required and must be at least 1.
      </div>
    </div>

    <div class="form-group">
      <label>Payment Date</label>
      <input formControlName="paymentDate" type="date" class="form-control">
      <div *ngIf="paymentForm.get('paymentDate')?.invalid && (paymentForm.get('paymentDate')?.touched || paymentForm.get('paymentDate')?.dirty)" class="text-danger">
        Payment date is required.
      </div>
    </div>

    <button type="submit" class="btn btn-primary mt-3" [disabled]="paymentForm.invalid">Make Payment</button>
  </form>
</div>
